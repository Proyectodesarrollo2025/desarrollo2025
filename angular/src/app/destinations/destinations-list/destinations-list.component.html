<div class="container-fluid mt-3">
  <div class="card">
    
    <div class="card-header bg-white">
      <h3 class="card-title m-0 text-primary">
        <i class="fas fa-map-marked-alt me-2"></i>
        Buscador de Ciudades
      </h3>
    </div>

    <div class="card-body">
      
      <div class="row g-3 mb-4 align-items-end">
        
        <div class="col-md-5">
          <label class="form-label fw-bold">Nombre Ciudad</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fa fa-search"></i></span>
            <input 
              type="text" 
              class="form-control" 
              [(ngModel)]="searchParams.query" 
              (keyup.enter)="onSearch()"
              placeholder="Ej: Paris, Lon..."
            >
          </div>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-bold">Código País (Opcional)</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fa fa-flag"></i></span>
            <input 
              type="text" 
              class="form-control" 
              [(ngModel)]="searchParams.country" 
              (keyup.enter)="onSearch()"
              placeholder="Ej: AR, US, ES"
              maxlength="2" 
            >
          </div>
        </div>

        <div class="col-md-3">
          <button class="btn btn-primary w-100 mb-2" (click)="onSearch()" [disabled]="isLoading">
            {{ isLoading ? 'Buscando...' : 'Buscar' }}
          </button>
          <button class="btn btn-outline-secondary w-100" (click)="clearSearch()">
            Limpiar
          </button>
        </div>
      </div>

      <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2 text-muted">Consultando GeoDB...</p>
      </div>

      <div class="row" *ngIf="!isLoading && cities.length > 0">
        <div class="col-md-4 mb-4" *ngFor="let city of cities">
          
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body">
              <h5 class="card-title text-dark fw-bold">{{ city.name }}</h5>
              <hr>
              
              <p class="card-text mb-1">
                <i class="fa fa-globe text-primary me-2"></i> 
                <strong>País:</strong> {{ city.country }} 
                <span *ngIf="city.countryCode" class="badge bg-secondary ms-1">{{ city.countryCode }}</span>
              </p>
              
              <p class="card-text mb-1" *ngIf="city.region">
                <i class="fa fa-map-pin text-danger me-2"></i> 
                <strong>Región:</strong> {{ city.region }}
              </p>
              
              <p class="card-text mb-3">
                <i class="fa fa-compass text-success me-2"></i> 
                <strong>Coords:</strong> {{ formatCoordinates(city.latitude, city.longitude) }}
              </p>

              <button class="btn btn-outline-primary btn-sm w-100" (click)="openInMaps(city)">
                Ver en Google Maps
              </button>
            </div>
          </div>

        </div>
      </div>

      <div *ngIf="!isLoading && cities.length === 0 && searchParams.query" class="alert alert-info text-center">
        No se encontraron ciudades con ese nombre.
      </div>

    </div>
  </div>
</div>